root@ubuntu-s-1vcpu-1gb-nyc3-01:/var/www/clarifyops/backend# cat > /var/www/clarifyops/backend/.env << 'EOF'
NODE_ENV=production
PORT=3000
DATABASE_URL=postgresql://clarifyops:ClarifyOps2026@localhost:5432/clarifyops_db
PGHOST=localhost
PGPORT=5432
PGUSER=clarifyops
PGPASSWORD=ClarifyOps2026
PGDATABASE=clarifyops_db
JWT_SECRET=ClarifyOps2026SuperSecretKeyForProductionJWTTokens
JWT_REFRESH_SECRET=ClarifyOps2026RefreshTokenSecretKeyForProduction
CORS_ORIGIN=https://clarifyops.com
OPENROUTER_API_KEY=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
EOF
root@ubuntu-s-1vcpu-1gb-nyc3-01:/var/www/clarifyops/backend# pm2 restart clarifyops-backend --update-env
[PM2] Applying action restartProcessId on app [clarifyops-backend](ids: [ 0 ])
[PM2] [clarifyops-backend](0) âœ“
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name                  â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ clarifyops-backend    â”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 37078    â”‚ 0s     â”‚ 70   â”‚ online    â”‚ 0%       â”‚ 18.4mb   â”‚ root     â”‚ disabled â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
root@ubuntu-s-1vcpu-1gb-nyc3-01:/var/www/clarifyops/backend# pm2 logs clarifyops-backend --lines 30
[TAILING] Tailing last 30 lines for [clarifyops-backend] process (change the value with --lines option)
/root/.pm2/logs/clarifyops-backend-out.log last 30 lines:
0|clarifyo |   connectionTimeoutMillis: 2000,
0|clarifyo |   ssl: false,
0|clarifyo |   connectionString: 'postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable'
0|clarifyo | }
0|clarifyo | info: Postgres config: {"connectionString":"postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable","connectionTimeoutMillis":2000,"database":"invoices_db","host":"db","idleTimeoutMillis":30000,"max":20,"min":2,"password":"TATA1tata1","port":5432,"ssl":false,"timestamp":"2026-01-29T22:43:58.211Z","user":"postgres"}
0|clarifyo | ðŸ”§ AI Controller loaded
0|clarifyo | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:00.282Z"}
0|clarifyo | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:00.301Z"}
0|clarifyo | info: ðŸŸ¡ Starting server... {"timestamp":"2026-01-29T22:44:01.335Z"}
0|clarifyo | error: SESSION_SECRET is missing or too short. Must be at least 32 characters. {"timestamp":"2026-01-29T22:44:01.349Z"}
0|clarifyo | info: ðŸ”Ž Using DATABASE_URL: {"0":"p","1":"o","10":":","11":"/","12":"/","13":"c","14":"l","15":"a","16":"r","17":"i","18":"f","19":"y","2":"s","20":"o","21":"p","22":"s","23":":","24":"C","25":"l","26":"a","27":"r","28":"i","29":"f","3":"t","30":"y","31":"O","32":"p","33":"s","34":"2","35":"0","36":"2","37":"6","38":"@","39":"l","4":"g","40":"o","41":"c","42":"a","43":"l","44":"h","45":"o","46":"s","47":"t","48":":","49":"5","5":"r","50":"4","51":"3","52":"2","53":"/","54":"c","55":"l","56":"a","57":"r","58":"i","59":"f","6":"e","60":"y","61":"o","62":"p","63":"s","64":"_","65":"d","66":"b","7":"s","8":"q","9":"l","timestamp":"2026-01-29T22:44:05.546Z"}
0|clarifyo | ðŸ”Ž Final dbConfig: {
0|clarifyo |   host: 'db',
0|clarifyo |   port: 5432,
0|clarifyo |   user: 'postgres',
0|clarifyo |   password: 'TATA1tata1',
0|clarifyo |   database: 'invoices_db',
0|clarifyo |   max: 20,
0|clarifyo |   min: 2,
0|clarifyo |   idleTimeoutMillis: 30000,
0|clarifyo |   connectionTimeoutMillis: 2000,
0|clarifyo |   ssl: false,
0|clarifyo |   connectionString: 'postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable'
0|clarifyo | }
0|clarifyo | info: Postgres config: {"connectionString":"postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable","connectionTimeoutMillis":2000,"database":"invoices_db","host":"db","idleTimeoutMillis":30000,"max":20,"min":2,"password":"TATA1tata1","port":5432,"ssl":false,"timestamp":"2026-01-29T22:44:05.557Z","user":"postgres"}
0|clarifyo | ðŸ”§ AI Controller loaded
0|clarifyo | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:07.649Z"}
0|clarifyo | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:07.670Z"}
0|clarifyo | info: ðŸŸ¡ Starting server... {"timestamp":"2026-01-29T22:44:08.351Z"}
0|clarifyo | error: SESSION_SECRET is missing or too short. Must be at least 32 characters. {"timestamp":"2026-01-29T22:44:08.361Z"}

/root/.pm2/logs/clarifyops-backend-error.log last 30 lines:
0|clarifyo | (node:36920) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:36933) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:36944) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:36955) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:36966) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:36980) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:36991) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:37002) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:37013) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:37025) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:37036) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:37047) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:37059) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:37078) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyo | (node:37089) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyo | (Use `node --trace-warnings ...` to show where the warning was created)

0|clarifyops-backend  | info: ðŸ”Ž Using DATABASE_URL: {"0":"p","1":"o","10":":","11":"/","12":"/","13":"c","14":"l","15":"a","16":"r","17":"i","18":"f","19":"y","2":"s","20":"o","21":"p","22":"s","23":":","24":"C","25":"l","26":"a","27":"r","28":"i","29":"f","3":"t","30":"y","31":"O","32":"p","33":"s","34":"2","35":"0","36":"2","37":"6","38":"@","39":"l","4":"g","40":"o","41":"c","42":"a","43":"l","44":"h","45":"o","46":"s","47":"t","48":":","49":"5","5":"r","50":"4","51":"3","52":"2","53":"/","54":"c","55":"l","56":"a","57":"r","58":"i","59":"f","6":"e","60":"y","61":"o","62":"p","63":"s","64":"_","65":"d","66":"b","7":"s","8":"q","9":"l","timestamp":"2026-01-29T22:44:11.203Z"}
0|clarifyops-backend  | ðŸ”Ž Final dbConfig: {
0|clarifyops-backend  |   host: 'db',
0|clarifyops-backend  |   port: 5432,
0|clarifyops-backend  |   user: 'postgres',
0|clarifyops-backend  |   password: 'TATA1tata1',
0|clarifyops-backend  |   database: 'invoices_db',
0|clarifyops-backend  |   max: 20,
0|clarifyops-backend  |   min: 2,
0|clarifyops-backend  |   idleTimeoutMillis: 30000,
0|clarifyops-backend  |   connectionTimeoutMillis: 2000,
0|clarifyops-backend  |   ssl: false,
0|clarifyops-backend  |   connectionString: 'postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable'
0|clarifyops-backend  | }
0|clarifyops-backend  | info: Postgres config: {"connectionString":"postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable","connectionTimeoutMillis":2000,"database":"invoices_db","host":"db","idleTimeoutMillis":30000,"max":20,"min":2,"password":"TATA1tata1","port":5432,"ssl":false,"timestamp":"2026-01-29T22:44:11.214Z","user":"postgres"}
0|clarifyops-backend  | ðŸ”§ AI Controller loaded
0|clarifyops-backend  | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:13.041Z"}
0|clarifyops-backend  | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:13.062Z"}
0|clarifyops-backend  | info: ðŸŸ¡ Starting server... {"timestamp":"2026-01-29T22:44:13.971Z"}
0|clarifyops-backend  | error: SESSION_SECRET is missing or too short. Must be at least 32 characters. {"timestamp":"2026-01-29T22:44:13.983Z"}
0|clarifyops-backend  | (node:37111) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyops-backend  | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyops-backend  | info: ðŸ”Ž Using DATABASE_URL: {"0":"p","1":"o","10":":","11":"/","12":"/","13":"c","14":"l","15":"a","16":"r","17":"i","18":"f","19":"y","2":"s","20":"o","21":"p","22":"s","23":":","24":"C","25":"l","26":"a","27":"r","28":"i","29":"f","3":"t","30":"y","31":"O","32":"p","33":"s","34":"2","35":"0","36":"2","37":"6","38":"@","39":"l","4":"g","40":"o","41":"c","42":"a","43":"l","44":"h","45":"o","46":"s","47":"t","48":":","49":"5","5":"r","50":"4","51":"3","52":"2","53":"/","54":"c","55":"l","56":"a","57":"r","58":"i","59":"f","6":"e","60":"y","61":"o","62":"p","63":"s","64":"_","65":"d","66":"b","7":"s","8":"q","9":"l","timestamp":"2026-01-29T22:44:16.439Z"}
0|clarifyops-backend  | ðŸ”Ž Final dbConfig: {
0|clarifyops-backend  |   host: 'db',
0|clarifyops-backend  |   port: 5432,
0|clarifyops-backend  |   user: 'postgres',
0|clarifyops-backend  |   password: 'TATA1tata1',
0|clarifyops-backend  |   database: 'invoices_db',
0|clarifyops-backend  |   max: 20,
0|clarifyops-backend  |   min: 2,
0|clarifyops-backend  |   idleTimeoutMillis: 30000,
0|clarifyops-backend  |   connectionTimeoutMillis: 2000,
0|clarifyops-backend  |   ssl: false,
0|clarifyops-backend  |   connectionString: 'postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable'
0|clarifyops-backend  | }
0|clarifyops-backend  | info: Postgres config: {"connectionString":"postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable","connectionTimeoutMillis":2000,"database":"invoices_db","host":"db","idleTimeoutMillis":30000,"max":20,"min":2,"password":"TATA1tata1","port":5432,"ssl":false,"timestamp":"2026-01-29T22:44:16.450Z","user":"postgres"}
0|clarifyops-backend  | ðŸ”§ AI Controller loaded
0|clarifyops-backend  | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:18.419Z"}
0|clarifyops-backend  | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:18.439Z"}
0|clarifyops-backend  | info: ðŸŸ¡ Starting server... {"timestamp":"2026-01-29T22:44:19.238Z"}
0|clarifyops-backend  | error: SESSION_SECRET is missing or too short. Must be at least 32 characters. {"timestamp":"2026-01-29T22:44:19.247Z"}
0|clarifyops-backend  | (node:37122) V8: file:///var/www/clarifyops/backend/swagger.js:3 'assert' is deprecated in import statements and support will be removed in a future version; use 'with' instead
0|clarifyops-backend  | (Use `node --trace-warnings ...` to show where the warning was created)
0|clarifyops-backend  | info: ðŸ”Ž Using DATABASE_URL: {"0":"p","1":"o","10":":","11":"/","12":"/","13":"c","14":"l","15":"a","16":"r","17":"i","18":"f","19":"y","2":"s","20":"o","21":"p","22":"s","23":":","24":"C","25":"l","26":"a","27":"r","28":"i","29":"f","3":"t","30":"y","31":"O","32":"p","33":"s","34":"2","35":"0","36":"2","37":"6","38":"@","39":"l","4":"g","40":"o","41":"c","42":"a","43":"l","44":"h","45":"o","46":"s","47":"t","48":":","49":"5","5":"r","50":"4","51":"3","52":"2","53":"/","54":"c","55":"l","56":"a","57":"r","58":"i","59":"f","6":"e","60":"y","61":"o","62":"p","63":"s","64":"_","65":"d","66":"b","7":"s","8":"q","9":"l","timestamp":"2026-01-29T22:44:21.688Z"}
0|clarifyops-backend  | ðŸ”Ž Final dbConfig: {
0|clarifyops-backend  |   host: 'db',
0|clarifyops-backend  |   port: 5432,
0|clarifyops-backend  |   user: 'postgres',
0|clarifyops-backend  |   password: 'TATA1tata1',
0|clarifyops-backend  |   database: 'invoices_db',
0|clarifyops-backend  |   max: 20,
0|clarifyops-backend  |   min: 2,
0|clarifyops-backend  |   idleTimeoutMillis: 30000,
0|clarifyops-backend  |   connectionTimeoutMillis: 2000,
0|clarifyops-backend  |   ssl: false,
0|clarifyops-backend  |   connectionString: 'postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable'
0|clarifyops-backend  | }
0|clarifyops-backend  | info: Postgres config: {"connectionString":"postgresql://clarifyops:ClarifyOps2026@db:5432/clarifyops_db?sslmode=disable","connectionTimeoutMillis":2000,"database":"invoices_db","host":"db","idleTimeoutMillis":30000,"max":20,"min":2,"password":"TATA1tata1","port":5432,"ssl":false,"timestamp":"2026-01-29T22:44:21.698Z","user":"postgres"}
0|clarifyops-backend  | ðŸ”§ AI Controller loaded
0|clarifyops-backend  | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:23.572Z"}
0|clarifyops-backend  | warn: Redis not configured; async queues disabled {"timestamp":"2026-01-29T22:44:23.590Z"}
0|clarifyops-backend  | info: ðŸŸ¡ Starting server... {"timestamp":"2026-01-29T22:44:24.278Z"}